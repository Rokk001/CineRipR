# Release Notes: CineRipR v2.5.6

**Release Date:** November 10, 2025  
**Type:** Hotfix Release  
**Priority:** **CRITICAL** - Progressbar display fix

---

## ğŸš¨ Critical Fix

This release fixes a critical bug that prevented the countdown progressbar from displaying when Auto-Run was enabled.

### **Progressbar Not Showing When Auto-Run Enabled** ğŸ”¥

**Symptom:**
- WebGUI shows "Idle (Manual Mode)" even though "Enable Auto-Run (Repeat Forever)" is checked
- Progressbar does not appear in header
- Settings show `repeat_forever: True` and `repeat_after_minutes: 2` (or any value > 0)

**Root Cause:**
In the settings update endpoint (`/api/settings/<key>`), `db.get("repeat_forever", False)` was used. This method:
- Does **NOT** use `DEFAULT_SETTINGS`
- Only uses the `default` parameter (which was `False`)
- Returns `False` when the DB is empty or the key doesn't exist yet

Even though `DEFAULT_SETTINGS` has `repeat_forever: True`, `db.get()` ignored it and returned `False`, causing the progressbar to not show.

**Fix:**
Changed from `db.get()` to `db.get_all()`:
- `db.get_all()` returns `DEFAULT_SETTINGS.copy()` with DB overrides
- This ensures correct default values are used when DB is empty
- Now `repeat_forever: True` from `DEFAULT_SETTINGS` is correctly used

**Impact:** Progressbar now **ALWAYS shows** when Auto-Run is enabled, even if the DB is empty or the key doesn't exist yet.

---

## ğŸ”§ Technical Details

### Modified Files

1. **`src/cineripr/__init__.py`**
   - Version bump: `2.5.5` â†’ `2.5.6`

2. **`src/cineripr/web/webgui.py`**
   - Changed from `db.get()` to `db.get_all()` in settings update endpoint (lines 2615-2617)
   - Now uses `db_settings.get("repeat_forever")` and `db_settings.get("repeat_after_minutes")` from `get_all()`
   - This ensures `DEFAULT_SETTINGS` are correctly applied

3. **`pyproject.toml`**
   - Version bump: `2.5.5` â†’ `2.5.6`

---

## ğŸ§ª Testing

The bug has been verified fixed:

| Test Case | Status | Result |
|-----------|--------|--------|
| Empty DB + Auto-Run enabled | âœ… Fixed | Progressbar shows with default 30min interval |
| DB with `repeat_forever: True` | âœ… Fixed | Progressbar shows correctly |
| Settings update triggers progressbar | âœ… Fixed | Progressbar appears immediately after enabling Auto-Run |

---

## ğŸš€ Upgrade Path

### Docker (Recommended)

```bash
docker pull ghcr.io/rokk001/cineripr:2.5.6
docker compose up -d
```

### Manual

```bash
git pull origin main
git checkout v2.5.6
pip install -e .
```

---

## ğŸ“ Notes

- **Database Migration:** None required
- **Configuration:** No changes required
- **Breaking Changes:** None
- **Rollback:** Safe to rollback to v2.5.5 if needed

---

## ğŸ™ Credits

Special thanks to the user who reported this bug with detailed screenshots and persistence!

---

## ğŸ”— Links

- [Full Changelog](../../CHANGELOG.md#256---2025-11-10)
- [GitHub Repository](https://github.com/Rokk001/CineRipR)
- [Docker Hub](https://ghcr.io/rokk001/cineripr)
- [Documentation](../../docs/README.md)

