# Release Notes v2.5.14

**Release Date:** 2025-11-13  
**Type:** Critical Bug Fix Release

## üêõ Critical Bug Fixes

### `progress_callback` NameError behoben

**Problem:** 
- `_extract_with_seven_zip()` verwendete `progress_callback`, aber der Parameter fehlte in der Funktionssignatur
- Fehler: `name 'progress_callback' is not defined` verursachte Endlosschleife und hohe CPU-Last
- Docker Container lief permanent auf hoher CPU-Last
- GUI zeigte f√§lschlicherweise "Processing" an, obwohl nichts verarbeitet wurde

**L√∂sung:**
- `progress_callback` Parameter zu `_extract_with_seven_zip()` hinzugef√ºgt
- `progress_callback` wird von `extract_archive()` korrekt an `_extract_with_seven_zip()` weitergegeben
- `Callable` Import hinzugef√ºgt

**Impact:**
- Kein `NameError` mehr bei der Extraktion
- Extraktion funktioniert wieder korrekt mit Progress-Updates

### Endlosschleife und hohe CPU-Last behoben

**Problem:**
- Nach einem Fehler wurde `tracker.stop_processing()` nicht aufgerufen
- `is_running` blieb auf `True` ‚Üí GUI zeigte f√§lschlicherweise "Processing" an
- Sleep-Schleife wurde √ºbersprungen ‚Üí sofortiger Neustart ‚Üí permanente CPU-Last
- Container lief permanent auf hoher CPU-Last, auch wenn nichts verarbeitet wurde

**L√∂sung:**
- `tracker.stop_processing()` wird jetzt nach jedem Fehler im Exception-Handler aufgerufen
- Sleep-Schleife wird jetzt korrekt ausgef√ºhrt (z.B. 35 Minuten)
- Logging f√ºr Fehler verbessert

**Impact:**
- Keine permanente CPU-Last mehr nach Fehlern
- GUI zeigt korrekt "Idle" statt "Processing" nach Fehlern
- Sleep-Schleife wird korrekt ausgef√ºhrt (z.B. 35 Minuten)
- Container l√§uft jetzt effizient im Idle-Zustand

## üîß Technical Details

### Code Changes

**`src/cineripr/extraction/archive_extraction.py`:**
- `_extract_with_seven_zip()` erweitert um `progress_callback: Callable[[int, int], None] | None = None` Parameter
- `progress_callback` wird von `extract_archive()` an beide `_extract_with_seven_zip()` Aufrufe weitergegeben
- `from typing import Callable` Import hinzugef√ºgt

**`src/cineripr/cli.py`:**
- `tracker.stop_processing()` wird nach Fehlern im Exception-Handler aufgerufen
- `tracker.add_log("ERROR", f"Unexpected error: {exc}")` f√ºr besseres Logging
- Verhindert Endlosschleife nach Fehlern

### Root Cause Analysis

1. **`progress_callback` NameError:**
   - `extract_archive()` hatte `progress_callback` als Parameter
   - `_extract_with_seven_zip()` verwendete `progress_callback` in Zeile 332
   - Aber `_extract_with_seven_zip()` hatte den Parameter nicht in der Signatur
   - ‚Üí `NameError: name 'progress_callback' is not defined`

2. **Endlosschleife:**
   - Nach einem Fehler wurde `tracker.stop_processing()` nicht aufgerufen
   - `is_running` blieb auf `True`
   - Die `while True` Schleife startete sofort den n√§chsten Run
   - Sleep-Schleife wurde √ºbersprungen
   - ‚Üí Permanente CPU-Last

## üìä Migration Notes

**Keine Migration erforderlich:**
- Dies ist ein reiner Bug-Fix Release
- Keine Datenbank-√Ñnderungen
- Keine Konfigurations-√Ñnderungen
- Einfach Container neu starten mit neuer Version

## üöÄ Deployment

- **Docker Image:** `ghcr.io/rokk001/cineripr:2.5.14`
- **Version:** `2.5.14`
- **Breaking Changes:** Keine
- **Migration Required:** Nein

## ‚ö†Ô∏è Wichtige Hinweise

- **Sofortiges Update empfohlen:** Dieser Release behebt kritische Bugs, die zu hoher CPU-Last f√ºhren k√∂nnen
- **Nach Update:** Container sollte jetzt im Idle-Zustand effizient laufen
- **Monitoring:** CPU-Last sollte jetzt normal sein, auch nach Fehlern

