# Release Notes v2.3.4

**Release Date:** 2025-11-10  
**Type:** Feature Release & Bug Fixes

## üöÄ Major Changes

### Queue Functionality Activated

**Problem:** The processing queue was implemented but never populated, showing "No items in queue" even when releases were being processed.

**Solution:** 
- Queue is now populated when releases are found during scanning
- Shows all found releases with archive counts
- Displays status for each release (pending, processing, completed, failed)
- Status updates in real-time during processing

**Impact:** 
- Users can now see which releases are waiting to be processed
- Better visibility of processing status
- Queue shows archive counts for each release
- Real-time status updates during processing

## üéØ Improvements

### Countdown During Processing

**Change:** Countdown for next run is now visible during processing, not just in idle state.

**Before:** Countdown was only shown when application was idle.

**After:** Countdown is displayed whenever `seconds_until_next_run` is available, making scheduled runs visible even during active processing.

### System Health Updates

**Change:** System health metrics are now updated more frequently.

**Before:** System health was only updated once at startup and every 30 seconds during idle periods.

**After:** 
- Updates at start of each processing run
- Updates after processing completes
- Updates every 30 seconds during idle periods
- Ensures system information is always current

### File Stability Hours Description

**Change:** Clarified that this setting only applies to already extracted files.

**Before:** Description said "Hours a file must be unchanged before processing" which could be interpreted as applying to all files.

**After:** Description now explicitly states "Hours an already extracted file (e.g., MKV) must be unchanged before processing. Only applies to non-archive files. Archives are processed immediately."

## üîß Technical Details

### Queue Implementation

- Queue items are added when releases are found during scanning in `process_downloads()`
- Queue status is updated during processing (pending ‚Üí processing ‚Üí completed/failed)
- StatusTracker is imported and used when WebGUI is enabled
- Archive counts are calculated during initial scan

### System Health Updates

- System health updates are triggered at multiple points in the processing cycle
- Updates occur at start of each run, after processing completes, and every 30 seconds during idle
- 7-Zip version detection is performed at each update point

### Countdown Display

- Countdown display logic extended to show during processing state
- Countdown is displayed whenever `seconds_until_next_run` is available
- Pulse animation when countdown is less than 1 minute

## üêõ Bug Fixes

### Empty Queue Display

**Issue:** Queue was always empty, showing "No items in queue" even when releases were being processed.

**Fix:** Queue is now populated when releases are found during scanning. StatusTracker is imported and used to add items to the queue.

### System Health Showing Empty Values

**Issue:** System health metrics (disk space, CPU, memory) were showing 0.0% or empty values.

**Fix:** System health updates are now triggered at multiple points in the processing cycle, ensuring metrics are always current.

### Countdown Not Showing During Processing

**Issue:** Countdown for next run was not visible during processing, only in idle state.

**Fix:** Countdown display logic extended to show during processing state when `seconds_until_next_run` is available.

### File Stability Hours Description

**Issue:** Description was unclear about when this setting applies.

**Fix:** Description now explicitly states it only applies to non-archive files (e.g., MKV files that are already extracted). Archives are processed immediately regardless of this setting.

## üìã Migration Guide

### No Migration Required

This release is fully backward compatible. No migration steps are required.

### New Behavior

- Queue will now show releases that are found during scanning
- Countdown will be visible during processing if a next run is scheduled
- System health metrics will be updated more frequently
- File Stability Hours description is now clearer

## üéØ Use Cases

### Queue Visibility

**Scenario:** User wants to see which releases are waiting to be processed.

**Solution:** Queue tab now shows all found releases with their archive counts and status.

### Countdown During Processing

**Scenario:** User wants to know when the next run will start even while processing is active.

**Solution:** Countdown is now visible in the header during processing, showing time until next scheduled run.

### System Health Monitoring

**Scenario:** User wants to monitor disk space and system resources in real-time.

**Solution:** System health metrics are now updated at multiple points, ensuring current information is always displayed.

## üîç Testing

### Test Scenarios

1. **Queue Population:** Start processing with releases in downloads directory ‚Üí Queue should show all found releases
2. **Queue Status Updates:** Process releases ‚Üí Queue status should update from pending ‚Üí processing ‚Üí completed/failed
3. **Countdown During Processing:** Start processing with repeat mode enabled ‚Üí Countdown should be visible in header
4. **System Health Updates:** Check system health tab ‚Üí Metrics should be current and not empty

## üìù Notes

- Queue items are automatically added when releases are found during scanning
- Queue status updates in real-time during processing
- Countdown is visible in all states when `seconds_until_next_run` is available
- System health updates occur at multiple points to ensure current information
- File Stability Hours setting only applies to non-archive files

