# Release Notes v2.3.0

**Release Date:** 2025-11-10  
**Type:** Major Release

## üöÄ Major Changes

### TOML Configuration Optional

- **`--config` is now optional**
  - If not provided, paths must be set via CLI args (`--download-root`, `--extracted-root`, `--finished-root`)
  - All other settings can be managed via WebGUI
  - TOML file is no longer required for Docker deployments

### WebGUI Settings Priority

- **WebGUI settings now override TOML/CLI settings**
  - Settings from SQLite database have highest priority
  - Priority order: **WebGUI (SQLite) > CLI args > TOML file > Defaults**
  - Fixes issue where TOML settings were overriding WebGUI settings

## üéØ Improvements

### Docker Deployment

- **Simplified Docker setup**
  - No TOML file required
  - Paths configured via CLI args
  - All settings managed via WebGUI
  - Settings database stored in `/config` volume

## üîß Technical Details

### Settings Loading

- `load_and_merge_settings()` now loads WebGUI settings from SQLite database
- WebGUI settings override TOML/CLI settings for:
  - `repeat_forever` / `repeat_after_minutes`
  - `finished_retention_days`
  - `enable_delete`
  - `include_sample` / `include_sub` / `include_other`
  - `demo_mode`

### Code Changes

- `--config` argument is now optional (default: `None`)
- `load_and_merge_settings()` rewritten to support:
  - Optional TOML file loading
  - CLI args for paths (required if no TOML)
  - WebGUI settings from SQLite database
  - Priority-based settings merging

## üìù Migration

### For Docker Users

**Before (v2.2.5):**
```yaml
command: ["umask 000 && exec python -m cineripr.cli --config /config/cineripr.toml"]
volumes:
  - /mnt/user/appdata/cineripr/cineripr.toml:/config/cineripr.toml:ro
```

**After (v2.3.0):**
```yaml
command: ["umask 000 && exec python -m cineripr.cli --download-root /data/downloads --extracted-root /data/extracted --finished-root /data/finished"]
volumes:
  - /mnt/user/appdata/cineripr:/config
```

**Steps:**
1. Remove TOML file from Dockerfile
2. Use CLI args for paths: `--download-root`, `--extracted-root`, `--finished-root`
3. Configure all other settings via WebGUI
4. Settings database will be created automatically in `/config` volume

### For TOML Users

- TOML files still work (backward compatible)
- WebGUI settings will override TOML settings if configured
- You can continue using TOML files, but WebGUI settings take priority

## üêõ Bug Fixes

- **Fixed:** TOML settings were overriding WebGUI settings
  - Now WebGUI settings have highest priority
  - Settings configured in WebGUI are now properly applied

## üìä Example Docker Compose

```yaml
services:
  cineripr:
    image: ghcr.io/rokk001/cineripr:latest
    container_name: cineripr
    ports:
      - 8080:8080
    restart: unless-stopped
    user: "99:100"
    entrypoint: ["/bin/sh","-c"]
    command: ["umask 000 && exec python -m cineripr.cli --download-root /data/downloads --extracted-root /data/extracted --finished-root /data/finished"]
    volumes:
      - /mnt/user/Download/dcpp/:/data/downloads
      - /mnt/user/Multimedia/Neu/_extracted:/data/extracted
      - /mnt/user/Multimedia/Neu/_finished:/data/finished
      - /mnt/user/appdata/cineripr:/config
```

## ‚ö†Ô∏è Breaking Changes

- **`--config` is now optional** (was required before)
- If `--config` is not provided, paths must be set via CLI args
- WebGUI settings now override TOML/CLI settings (behavior change)

## üîÑ Backward Compatibility

- TOML files still work if provided
- CLI args still work as before
- WebGUI settings are additive (only override if configured)

---

**Full Changelog:** [v2.2.5...v2.3.0](https://github.com/Rokk001/CineRipR/compare/v2.2.5...v2.3.0)

